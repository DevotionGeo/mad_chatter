#!/usr/bin/env ruby

require "thor"

module MadChatter
  
  class Cli < Thor
    include Thor::Actions
    
    def self.source_root
      File.expand_path("../", File.dirname(__FILE__))
    end
    
    desc "new [name]", "Generates a new Mad Chatter chatroom application"
    def new(name)
      empty_directory "#{name}/extensions"
      copy_file "README", "#{name}/README"
      copy_file "templates/config.rb", "#{name}/config.rb"
      copy_file "templates/index.html", "#{name}/web/index.html"
      copy_file "templates/javascript.js", "#{name}/web/javascript.js"
      copy_file "templates/stylesheets/reset.css", "#{name}/web/stylesheets/reset.css"
      copy_file "templates/stylesheets/styles.css", "#{name}/web/stylesheets/styles.css"
    end
    
    desc 'start', 'Starts the chat server daemon'
    def start
      puts 'TODO'
    end
    
    desc 'stop', 'Stops the chat server daemon'
    def stop
      puts 'TODO'
    end
  end
end

MadChatter::Cli.start